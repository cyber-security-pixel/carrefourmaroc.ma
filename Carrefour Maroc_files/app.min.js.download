!function(){function a(t){this.g=[],this.k=t}function z(t){var e,i={type:null,target:null,addedNodes:[],removedNodes:[],previousSibling:null,nextSibling:null,attributeName:null,attributeNamespace:null,oldValue:null};for(e in t)i[e]!==C&&t[e]!==C&&(i[e]=t[e]);return i}function u(n,r){var o=s(n,r);return function(t){var e,g,f,b,i=t.length;function v(t,e,i,n,r){var o,a,u,s=t.length-1;for(r=-~((s-r)/2);u=t.pop();)o=i[u.h],a=n[u.i],f.b&&r&&Math.abs(u.h-u.i)>=s&&(g.push(z({type:"childList",target:e,addedNodes:[o],removedNodes:[o],nextSibling:o.nextSibling,previousSibling:o.previousSibling})),r--),f.a&&a.a&&S(g,o,a.a,f.d),f.c&&3===o.nodeType&&o.nodeValue!==a.c&&g.push(z({type:"characterData",target:o})),f.e&&m(o,a)}function m(t,e){for(var i,n,r,o,a,u=t.childNodes,s=e.b,d=u.length,c=s?s.length:0,l=0,p=0,h=0;p<d||h<c;)(o=u[p])===(a=(r=s[h])&&r.j)?(f.a&&r.a&&S(g,o,r.a,f.d),f.c&&r.c!==C&&o.nodeValue!==r.c&&g.push(z({type:"characterData",target:o})),n&&v(n,t,u,s,l),f.e&&(o.childNodes.length||r.b&&r.b.length)&&m(o,r),p++,h++):(b=!0,i||(i={},n=[]),o&&(i[r=y(o)]||(i[r]=!0,-1===(r=w(s,o,h,"j"))?f.b&&(g.push(z({type:"childList",target:t,addedNodes:[o],nextSibling:o.nextSibling,previousSibling:o.previousSibling})),l++):n.push({h:p,i:r})),p++),a&&a!==u[p]&&(i[r=y(a)]||(i[r]=!0,-1===(r=w(u,a,p))?f.b&&(g.push(z({type:"childList",target:e.j,removedNodes:[a],nextSibling:s[h+1],previousSibling:s[h-1]})),l--):n.push({h:r,i:h})),h++));n&&v(n,t,u,s,l)}r.a&&o.a&&S(t,n,o.a,r.d),(r.b||r.e)&&(g=t,f=r,m(n,o),e=b),!e&&t.length===i||(o=s(n,r))}}function S(t,e,i,n){for(var r,o,a={},u=e.attributes,s=u.length;s--;)o=(r=u[s]).name,n&&n[o]===C||(r.value!==i[o]&&t.push(z({type:"attributes",target:e,attributeName:o,oldValue:i[o],attributeNamespace:r.namespaceURI})),a[o]=!0);for(o in i)a[o]||t.push(z({target:e,type:"attributes",attributeName:o,oldValue:i[o]}))}function s(t,n){var r=!0;return function t(e){var i={j:e};return!n.c||3!==e.nodeType&&8!==e.nodeType?(n.a&&r&&1===e.nodeType&&(i.a=d(e.attributes,function(t,e){return n.d&&!n.d[e.name]||(t[e.name]=e.value),t})),r&&(n.b||n.c||n.a&&n.e)&&(i.b=function(t,e){for(var i=[],n=0;n<t.length;n++)i[n]=e(t[n],n,t);return i}(e.childNodes,t)),r=n.e):i.c=e.nodeValue,i}(t)}function y(e){try{return e.id||(e.mo_id=e.mo_id||i++)}catch(t){try{return e.nodeValue}catch(t){return i++}}}function d(t,e){for(var i={},n=0;n<t.length;n++)i=e(i,t[n],n,t);return i}function w(t,e,i,n){for(;i<t.length;i++)if((n?t[i][n]:t[i])===e)return i;return-1}function e(t,e){return function(){return t.apply(e,arguments)}}var C,i;window.MutationObserver=window.MutationObserver||window.WebKitMutationObserver||(C=void 0,a._period=30,a.prototype={observe:function(t,e){for(var i,n={a:!!(e.attributes||e.attributeFilter||e.attributeOldValue),b:!!e.childList,e:!!e.subtree,c:!(!e.characterData&&!e.characterDataOldValue)},r=this.g,o=0;o<r.length;o++)r[o].m===t&&r.splice(o,1);e.attributeFilter&&(n.d=d(e.attributeFilter,function(t,e){return t[e]=!0,t})),r.push({m:t,l:u(t,n)}),this.f||(i=this,function t(){var e=i.takeRecords();e.length&&i.k(e,i),i.f=setTimeout(t,a._period)}())},takeRecords:function(){for(var t=[],e=this.g,i=0;i<e.length;i++)e[i].l(t);return t},disconnect:function(){this.g=[],clearTimeout(this.f),this.f=null}},i=1,a);function t(t){var n;null==t&&(t={}),this.updateSize=e(this.updateSize,this),this.options=_.defaults(t,{updateOnDomReady:!0,updateOnDomLoad:!0,updateOnWindowResize:!0,updateOnDomChange:!0}),this.options.updateOnDomReady&&$(this.updateSize),this.options.updateOnDomLoad&&$(window).load(this.updateSize),this.options.updateOnWindowResize&&$(window).resize(this.updateSize),this.options.updateOnDomChange&&new MutationObserver((n=this,function(t){for(var e=0,i=t.length;e<i;e++)t[e],n.updateSize()})).observe(window.document,{childList:!0,subtree:!0})}function n(){this.onStart=e(this.onStart,this)}Critizr.WidgetResizer=(t.prototype._getWidgetId=function(){return Critizr.config.widget_id},t.prototype.computeWidgetHeight=function(){return $("body").outerHeight(!0)},t.prototype.updateSize=function(){var t=this.computeWidgetHeight(),e=this._getWidgetId();return null!=e?parent.postMessage("cz:size:"+t+":"+e,"*"):parent.postMessage("cz:size:"+t,"*")},t),Critizr.App=(n.prototype.onStart=function(){return $("button,a").click(Critizr.App.onButtonClick)},n.onButtonClick=function(){return _.isString(Critizr.config.on_click)&&Critizr.config.on_click.startsWith("http")?window.open(Critizr.config.on_click,"_blank"):window.parent.postMessage(Critizr.config.on_click,"*")},n),Critizr.app=new Critizr.App,$(function(){return Critizr.app.onStart()})}.call(this);